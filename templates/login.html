{% extends 'base.html' %}

{% block title %}Login - CiviTrack 360{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-900 via-gray-850 to-black flex items-center justify-center p-6">
    <!-- Background decorative circles -->
    <div class="absolute top-8 -left-16 w-48 h-48 rounded-full" style="background: rgba(232, 131, 74, 0.07);"></div>
    <div class="absolute bottom-16 -right-20 w-64 h-64 rounded-full" style="background: rgba(232, 131, 74, 0.05);"></div>
    
    <div class="w-full max-w-md relative z-10">
        <!-- Title -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-white">CiviTrack <span style="color: #e8834a;">360</span></h1>
            <p class="text-sm text-gray-400 tracking-widest mt-1">SITE MANAGEMENT SYSTEM</p>
        </div>
        
        <!-- Login Form -->
        <div class="bg-white rounded-2xl p-8 shadow-xl">
            <h2 class="text-xl font-bold text-gray-900 text-center mb-6">Account Login</h2>
            
            <form method="POST">
                {% csrf_token %}
                
                <!-- Email Field -->
                <div class="mb-4">
                    <label class="label-text text-gray-700">Email</label>
                    <div class="relative">
                        <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                            <path d="M22 7l-10 6L2 7"></path>
                        </svg>
                        <input type="email" name="email" class="input-field pl-12" placeholder="Please enter your Email" required>
                    </div>
                </div>
                
                <!-- Password (DOB) Field -->
                <div class="mb-6">
                    <label class="label-text text-gray-700">Password (DOB)</label>
                    <div class="relative">
                        <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        <input type="password" name="password" id="login-password" class="input-field pl-12 pr-12" placeholder="Ex: 25042004" inputmode="numeric" maxlength="8" required>
                        <button type="button" id="toggle-password" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors pointer-events-auto" style="width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; background: none; border: none; cursor: pointer;" onclick="togglePasswordVisibility()">
                            <svg id="eye-icon" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                        </button>
                    </div>
                    <small style="color: #aaa; font-size: 12px; display: block; margin-top: 4px;">Enter 8 digits</small>
                </div>
                
                <!-- Login Button -->
                <button type="submit" class="btn-primary w-full mb-4">LOG IN</button>
            </form>
            
            <!-- Register Link -->
            <div class="text-center text-sm text-gray-600">
                No Account? <a href="{% url 'register' %}" class="font-semibold" style="color: #e8834a;">Register Now</a>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="text-center mt-8 text-xs text-gray-600">Powered by Haareef M A</div>
    </div>
</div>

<script>
// Only allow digits in login password field
const loginPassword = document.getElementById('login-password');
if (loginPassword) {
    loginPassword.addEventListener('input', function(e) {
        this.value = this.value.replace(/[^0-9]/g, '').slice(0, 8);
    });
}

// Toggle password visibility
function togglePasswordVisibility() {
    const passwordInput = document.getElementById('login-password');
    const eyeIcon = document.getElementById('eye-icon');
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        eyeIcon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>';
    } else {
        passwordInput.type = 'password';
        eyeIcon.innerHTML = '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>';
    }
}
</script>
{% endblock %}
