{% extends 'base.html' %}

{% block title %}Register - CiviTrack 360{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-900 via-gray-850 to-black flex items-center justify-center p-6">
    <!-- Background decorative circles -->
    <div class="absolute top-8 -right-8 w-44 h-44 rounded-full" style="background: rgba(232, 131, 74, 0.07);"></div>
    <div class="absolute bottom-16 -left-16 w-60 h-60 rounded-full" style="background: rgba(232, 131, 74, 0.05);"></div>
    
    <div class="w-full max-w-md relative z-10">
        <!-- Title -->
        <div class="text-center mb-6">
            <h1 class="text-4xl font-bold text-white">CiviTrack <span style="color: #e8834a;">360</span></h1>
        </div>
        
        <!-- Register Form -->
        <div class="bg-white rounded-2xl p-8 shadow-xl">
            <h2 class="text-2xl font-bold text-gray-900 text-center mb-6">Register</h2>
            
            <form method="POST">
                {% csrf_token %}
                
                <!-- Username Field -->
                <div class="mb-4">
                    <label class="label-text text-gray-700">User Name</label>
                    <div class="relative">
                        <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="8" r="4"></circle>
                        </svg>
                        <input type="text" name="username" class="input-field pl-12" placeholder="User Name" required>
                    </div>
                </div>
                
                <!-- Email Field -->
                <div class="mb-4">
                    <label class="label-text text-gray-700">Email</label>
                    <div class="relative">
                        <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                            <path d="M22 7l-10 6L2 7"></path>
                        </svg>
                        <input type="email" name="email" class="input-field pl-12" placeholder="Please enter your Email" required>
                    </div>
                </div>
                
                <!-- DOB (Password) Field -->
                <div class="mb-4">
                    <label class="label-text text-gray-700">Set DOB as Password</label>
                    <div class="relative">
                        <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        <input type="password" name="password1" id="password1" class="input-field pl-12 pr-12" placeholder="Ex: 25042004 (8 digits)" inputmode="numeric" maxlength="8" required>
                        <button type="button" id="toggle-password1" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors pointer-events-auto" style="width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; background: none; border: none; cursor: pointer;" onclick="togglePasswordVisibility1()">
                            <svg id="eye-icon1" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                        </button>
                    </div>
                    <small style="color: #888; font-size: 12px; display: block; margin-top: 4px;">Enter 8 digits (DOB)</small>
                </div>
                
                <!-- Confirm Password Field -->
                <div class="mb-6">
                    <label class="label-text text-gray-700">Confirm Password</label>
                    <div class="relative">
                        <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        <input type="password" name="password2" id="password2" class="input-field pl-12 pr-12" placeholder="Re-enter 8 digits" inputmode="numeric" maxlength="8" required>
                        <button type="button" id="toggle-password2" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors pointer-events-auto" style="width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; background: none; border: none; cursor: pointer;" onclick="togglePasswordVisibility2()">
                            <svg id="eye-icon2" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                        </button>
                    </div>
                    <small style="color: #888; font-size: 12px; display: block; margin-top: 4px;">Must match above</small>
                </div>
                
                <!-- Register Button -->
                <button type="submit" class="btn-primary w-full mb-4">REGISTER</button>
            </form>
            
            <!-- Back to Login Link -->
            <div class="text-center">
                <a href="{% url 'login' %}" class="font-semibold text-sm" style="color: #e8834a;">‚Üê Back to Login</a>
            </div>
        </div>
    </div>
</div>

<script>
// Only allow digits in password fields
document.getElementById('password1').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^0-9]/g, '').slice(0, 8);
});
document.getElementById('password2').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^0-9]/g, '').slice(0, 8);
});

// Toggle password visibility - Field 1
function togglePasswordVisibility1() {
    const passwordInput = document.getElementById('password1');
    const eyeIcon = document.getElementById('eye-icon1');
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        eyeIcon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>';
    } else {
        passwordInput.type = 'password';
        eyeIcon.innerHTML = '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>';
    }
}

// Toggle password visibility - Field 2
function togglePasswordVisibility2() {
    const passwordInput = document.getElementById('password2');
    const eyeIcon = document.getElementById('eye-icon2');
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        eyeIcon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>';
    } else {
        passwordInput.type = 'password';
        eyeIcon.innerHTML = '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>';
    }
}
</script>
{% endblock %}
